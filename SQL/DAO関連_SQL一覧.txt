
userテーブル関連

//新規ユーザー登録
//-------------------------------------------------
INSERT INTO user VALUES(null, ?, ?, ?);


//パスワード変更
//-------------------------------------------------
UPDATE user SET pw=? WHERE userid=?;





recipeテーブル関連

//ユーザーごとのレシピ検索
//-------------------------------------------------
SELECT * FROM recipe WHERE userid=0 OR userid=?;


//ユーザーによるレシピ登録
//-------------------------------------------------
INSERT INTO recipe VALUES(null, ?, ?, ?, ?, ?, ?);




※以降のSQL文は要修正します。

recordテーブル関連

//食事記録の登録
//-------------------------------------------------
INSERT INTO record VALUES(null, ?, ?, ?, ?, ?);


//食事記録の検索
//-------------------------------------------------
SELECT * FROM record WHERE userid=?;


//グラフデータの抽出
//-----------------------------------------------------------------
SELECT date, SUM(savings) FROM record WHERE userid=? GROUP BY date;





record_noteテーブル関連

//備考の登録
//-------------------------------------------------
INSERT INTO record_note VALUES(null, ?, ?, ?);


//備考の検索
//-----------------------------------------------------------------
SELECT * FROM record_note WHERE userid=?;





goalテーブル関連

//目標金額の登録
//-----------------------------------------------------------------
INSERT INTO goal VALUES(null, ?, ?, ?, 0);


//目標金額の検索
//-----------------------------------------------------------------
SELECT * FROM goal WHERE userid=? and date=?;


//目標金額の更新
//-----------------------------------------------------------------
UPDATE goal SET money=?, sum=SELECT SUM(savings) FROM record WHERE userid=1 AND date>=goal.date WHERE userid=1 AND date=?;





